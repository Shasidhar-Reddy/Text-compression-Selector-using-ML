# Text-compression-Selector-using-ML
import math, os, csv
from collections import Counter

def calculate_entropy(text):
    if not text: return 0
    freq = Counter(text)
    total = len(text)
    probs = [f / total for f in freq.values()]
    return -sum(p * math.log2(p) for p in probs if p > 0)

def unique_symbol_count(text):
    return len(set(text)) if text else 0

def mean_run_length(text):
    if not text: return 0
    runs, run = [], 1
    for i in range(1, len(text)):
        if text[i] == text[i - 1]:
            run += 1
        else:
            runs.append(run)
            run = 1
    runs.append(run)
    return sum(runs) / len(runs)

def max_run_length(text):
    if not text: return 0
    max_run, run = 1, 1
    for i in range(1, len(text)):
        if text[i] == text[i - 1]:
            run += 1
            max_run = max(max_run, run)
        else:
            run = 1
    return max_run

def symbol_frequency_variance(text):
    if not text: return 0
    freq = Counter(text)
    values = list(freq.values())
    mean_val = sum(values) / len(values)
    return sum((v - mean_val) ** 2 for v in values) / len(values)

def bigram_repeat_rate(text):
    if len(text) < 2: return 0
    bigrams = [text[i:i+2] for i in range(len(text) - 1)]
    freq = Counter(bigrams)
    repeats = sum(1 for v in freq.values() if v > 1)
    return repeats / len(freq)

def trigram_repeat_rate(text):
    if len(text) < 3: return 0
    trigrams = [text[i:i+3] for i in range(len(text) - 2)]
    freq = Counter(trigrams)
    repeats = sum(1 for v in freq.values() if v > 1)
    return repeats / len(freq)

def character_repetition_ratio(text):
    if not text: return 0
    repeated = sum(1 for i in range(1, len(text)) if text[i] == text[i - 1])
    return repeated / len(text)

def avg_word_length(text):
    words = [w for w in text.split() if w]
    if not words: return 0
    return sum(len(w) for w in words) / len(words)

def whitespace_ratio(text):
    if not text: return 0
    whites = sum(1 for c in text if c.isspace())
    return whites / len(text)
